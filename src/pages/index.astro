---
import Separator from "@/components/common/Separator.astro";
import type { CollectionEntry } from "astro:content";
import { getCollection, getEntry } from "astro:content";
import Projects from "../components/Projects.astro";
import MainLayout from "../layouts/MainLayout.astro";
import { Image } from "astro:assets";

const homeUiContent: CollectionEntry<"home"> = await getEntry(
  "home",
  "ui-content"
)!;

const allProjects: CollectionEntry<"project">[] = (
  await getCollection("project")
).sort(
  (a: CollectionEntry<"project">, b: CollectionEntry<"project">) =>
    b.data.weight.valueOf() - a.data.weight.valueOf()
);

const { mainTitle } = homeUiContent.data;
const { Content } = await homeUiContent.render();
---

<MainLayout>
  <section class="grid grid-cols-1 gap-5 lg:grid-cols-2">
    <div class="w-full flex justify-center items-center md:mb-0">
      <div class="flex items-center justify-center">
        <Image
          src="https://res.cloudinary.com/dceqefagi/image/upload/v1735266034/default-avatar_r1t1ua.svg"
          class="min-h-20 md:w-36 md:h-36 rounded-full w-24 h-24 shadow-lg"
          alt="Abdul Aliyev Photo"
          width={200}
          height={200}
        />
      </div>
    </div>
    <div>
      <h1 class="mb-5 md:mb-8 md:leading-relaxed text-center">{mainTitle}</h1>
      <article class="leading-relaxed md:leading-loose"><Content /></article>
    </div>
  </section>
  <Separator />
  <Projects />
  <Separator />
</MainLayout>
